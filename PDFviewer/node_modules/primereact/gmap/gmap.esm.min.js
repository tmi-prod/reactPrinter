import n,{Component as e}from"react";function t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function r(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function o(n,e){return(o=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n})(n,e)}function a(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&o(n,e)}function i(n){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function l(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function s(n,e){return!e||"object"!==i(e)&&"function"!=typeof e?l(n):e}function c(n){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function u(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var p={exports:{}};function f(){}function y(){}y.resetWarningCache=f;p.exports=function(){function n(n,e,t,r,o,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function e(){return n}n.isRequired=n;var t={array:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:y,resetWarningCache:f};return t.PropTypes=t,t}();var v=p.exports;function h(n,e){var t="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=d(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return i=n.done,n},e:function(n){l=!0,a=n},f:function(){try{i||null==t.return||t.return()}finally{if(l)throw a}}}}function d(n,e){if(n){if("string"==typeof n)return b(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?b(n,e):void 0}}function b(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}var g=function(o){a(v,e);var i,l,u,p,f,y=(i=v,l=m(),function(){var n,e=c(i);if(l){var t=c(this).constructor;n=Reflect.construct(e,arguments,t)}else n=e.apply(this,arguments);return s(this,n)});function v(){return t(this,v),y.apply(this,arguments)}return u=v,(p=[{key:"initMap",value:function(){this.map=new google.maps.Map(this.container,this.props.options),this.props.onMapReady&&this.props.onMapReady({map:this.map}),this.initOverlays(this.props.overlays),this.bindMapEvent("click",this.props.onMapClick),this.bindMapEvent("dragend",this.props.onMapDragEnd),this.bindMapEvent("zoom_changed",this.props.onZoomChanged)}},{key:"initOverlays",value:function(n){if(n){var e,t=h(n);try{for(t.s();!(e=t.n()).done;){var r=e.value;r.setMap(this.map),this.bindOverlayEvents(r)}}catch(n){t.e(n)}finally{t.f()}}}},{key:"bindOverlayEvents",value:function(n){var e=this;n.addListener("click",(function(t){e.props.onOverlayClick&&e.props.onOverlayClick({originalEvent:t,overlay:n,map:e.map})})),n.getDraggable()&&this.bindDragEvents(n)}},{key:"bindDragEvents",value:function(n){this.bindDragEvent(n,"dragstart",this.props.onOverlayDragStart),this.bindDragEvent(n,"drag",this.props.onOverlayDrag),this.bindDragEvent(n,"dragend",this.props.onOverlayDragEnd)}},{key:"bindMapEvent",value:function(n,e){this.map.addListener(n,(function(n){e&&e(n)}))}},{key:"bindDragEvent",value:function(n,e,t){var r=this;n.addListener(e,(function(e){t&&t({originalEvent:e,overlay:n,map:r.map})}))}},{key:"getMap",value:function(){return this.map}},{key:"componentDidUpdate",value:function(n,e,t){if(n.overlays!==this.props.overlays){if(n.overlays){var r,o=h(n.overlays);try{for(o.s();!(r=o.n()).done;){var a=r.value;google.maps.event.clearInstanceListeners(a),a.setMap(null)}}catch(n){o.e(n)}finally{o.f()}}this.initOverlays(this.props.overlays)}}},{key:"componentDidMount",value:function(){this.initMap()}},{key:"render",value:function(){var e=this;return n.createElement("div",{ref:function(n){return e.container=n},style:this.props.style,className:this.props.className})}}])&&r(u.prototype,p),f&&r(u,f),v}();u(g,"defaultProps",{options:null,overlays:null,style:null,className:null,onMapReady:null,onMapClick:null,onMapDragEnd:null,onZoomChanged:null,onOverlayDragStart:null,onOverlayDrag:null,onOverlayDragEnd:null,onOverlayClick:null}),u(g,"propTypes",{options:v.object,overlays:v.array,style:v.object,className:v.string,onMapReady:v.func,onMapClick:v.func,onMapDragEnd:v.func,onZoomChanged:v.func,onOverlayDragStart:v.func,onOverlayDrag:v.func,onOverlayDragEnd:v.func,onOverlayClick:v.func});export{g as GMap};
